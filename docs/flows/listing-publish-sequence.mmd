sequenceDiagram
  autonumber
  actor Seller
  participant FE as Next.js (Seller Area)
  participant API as FastAPI
  participant DB as Postgres

  Seller->>FE: Create listing draft
  FE->>API: POST /seller/listings
  API->>DB: Insert listing (DRAFT)
  DB-->>API: listing_id
  API-->>FE: listing_id

  Seller->>FE: Add line(s) (item+color+qty+price)
  FE->>API: POST /seller/listings/{id}/lines
  API->>DB: Validate catalog_item & color
  API->>DB: Insert/Update listing_lines
  API-->>FE: OK

  Seller->>FE: Publish
  FE->>API: POST /seller/listings/{id}:publish
  API->>DB: Validate required fields + qty >= 1 + price > 0
  API->>DB: Update status ACTIVE
  API-->>FE: ACTIVE
